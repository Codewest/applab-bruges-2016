var menuOpen = false;
var subMenuOpen = false;
var activeInterests = [];

var addEventListeners = function () {
    $(".hamburger").on("click", toggleMenu);
    $(".interesses").on("click", openInteressesPage);
    $(".interesses-page .menu-item").on("click", function() {
        $(this).toggleClass("activated");
        activeInterests = updateActiveInterests();
        console.log(getActiveInterests());
    });
};

var openInteressesPage = function() {
    $(".main-menu").slideUp();
    $(".interesses-page").slideDown();
    subMenuOpen = true;
};

var toggleMenu = function() {
    if (menuOpen) {
        if(subMenuOpen) {
            $(".interesses-page").slideUp();
            $(".main-menu").slideDown();
            subMenuOpen = false;
        } else {
            $(".hamburger i").html("menu");
            $(".main-menu").slideUp();
            $(".interesses-page").slide();
            menuOpen = false;
        }
    } else {
        $(".hamburger i").html("close");
        $(".main-menu").slideDown();
        menuOpen = true;
    }
};

var updateActiveInterests = function() {
    var interestList = $(".interesses-page").children();
    var activated = [];

    for (var i = 0; i < interestList.length; i++) {
        if (interestList[i].getAttribute("class").includes("activated")) {
            activated.push(interestList[i].getAttribute("class").split(" ")[1]);
        }
    }

    return activated;
};

var getActiveInterests = function() {
    return activeInterests;
};

var xStart;
var yStart;

var determinePosition = function determinePosition() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(setPosition, showError);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
};

function setPosition(position) {
    xStart = position.coords.latitude;
    yStart = position.coords.longitude;
}

function showError(error) {
    switch(error.code) {
        case error.PERMISSION_DENIED:
            x.innerHTML = "User denied the request for Geolocation.";
            break;
        case error.POSITION_UNAVAILABLE:
            x.innerHTML = "Location information is unavailable.";
            break;
        case error.TIMEOUT:
            x.innerHTML = "The request to get user location timed out.";
            break;
        case error.UNKNOWN_ERROR:
            x.innerHTML = "An unknown error occurred.";
            break;
    }
}

var openRoute = function openRoute() {
    var xDestination = 51.2079017; //end x-position here (open data)
    var yDestination = 3.2221577; //end x-position here
    var xCenter = (xStart + xDestination)/2;
    var yCenter = (yStart + yDestination)/2;
    var zoom = 18.75;
    window.open("https://www.google.be/maps/dir/" + xStart + "," + yStart + "/" + xDestination + "," + yDestination + "/@" + xCenter + "," + yCenter + "," + zoom +"z");
};

/**
 * Created by Sam on 14/10/2016.
 */
var drawBruges = function drawBruges(map) {
    map.addSource('Brugge', {
        'type': 'geojson',
        'data': {
            'type': 'Feature',
            'properties': {
                'name': 'Brugge'
            },
            'geometry': {
                "type":"Polygon",
                "coordinates":[[[3.15476744892041,51.3234140989248], [3.15506341515048,51.3228446746481], [3.15509453886165,51.3227858937051], [3.15530870478349,51.3223743889867], [3.15550350210443,51.3219962912782], [3.1556728415599,51.3216723970495], [3.1557062956764,51.3215950987342], [3.15579462817575,51.3213990039186], [3.15667203395984,51.3194507381225], [3.15754181947154,51.3196404030739], [3.15936367627512,51.3200564762843], [3.16098086871382,51.3203788898685], [3.16280916017925,51.3208343745895], [3.1639966232684,51.3211848211612], [3.16581496034153,51.3215984403175], [3.1679131357432,51.322134223545], [3.17003122134468,51.3226168650105], [3.17215099137294,51.3231075967475], [3.1735858682092,51.3216063460196], [3.17534803942473,51.319742188738], [3.1755286376775,51.3195504851308], [3.17655272712307,51.3185560988896], [3.17667795093217,51.3184322065145], [3.17689604796177,51.3182200192837], [3.17643625233827,51.3178329878349], [3.17598776458789,51.317437956553], [3.17555253013673,51.317103315077], [3.1754232009453,51.3170266904507], [3.17495142289077,51.3167473017668], [3.17415243826047,51.3161760697269], [3.17384941664817,51.31595052351], [3.17378162517701,51.3157099657644], [3.17384524300519,51.315536785022], [3.1739658014535,51.3152343910321], [3.17386972526281,51.3147270209669], [3.17369656974869,51.3141250096725], [3.17344305499472,51.3138443380735], [3.1733010998701,51.313827841938],[3.17310261201315,51.3137806462312],[3.17300844905228,51.3137032146231],[3.17274571090371,51.3130620569122],[3.17257729447908,51.3126362311054],[3.17261172601702,51.3125195382153],[3.17279162303132,51.3123544840438],[3.1729937606348,51.3121873363361],[3.17310430759215,51.3120586641588],[3.17302123170565,51.3118376511757],[3.17274417576029,51.3114663525244],[3.17230308267652,51.3110030097627],[3.17183835940585,51.3106680551923],[3.17175261320081,51.3106231542561],[3.17153735397104,51.3105097337894],[3.17142203038306,51.310320840576],[3.17146427126183,51.3100443100593],[3.17160676908104,51.3095358699468],[3.17176083620998,51.3092245453577],[3.17196541003335,51.3091060942116],[3.17223118594125,51.3089083021928],[3.17238268400109,51.3086247624568],[3.17309483079302,51.3071718386796],[3.17342459272994,51.306425409748],[3.17350320541069,51.3059557223854],[3.17339838360704,51.3053578736634],[3.17328107773318,51.3043102769377],[3.17306295074933,51.3041655416366],[3.17298549325438,51.3039422668002],[3.17293607642181,51.3029150539165],[3.17300393770085,51.3026480512373],[3.17323352696092,51.301625970483],[3.17342342212013,51.300925640765],[3.17368341293928,51.3005910461307],[3.17390468514671,51.3003244309611],[3.1739320583753,51.3000500663797],[3.17385601077089,51.29991603515],[3.17355679710755,51.299762370887],[3.1731685230655,51.2996217131672],[3.17252012625811,51.2994610461976],[3.17130277628762,51.2988542751669],[3.1698713635903,51.2980912021006],[3.16866141603943,51.2974867954066],[3.16791522580564,51.2971060944108],[3.16747416265353,51.2967203705594],[3.16696365838436,51.2963756583304],[3.16618658079379,51.2961186269363],[3.16627627649647,51.2956513719237],[3.16641722529727,51.2952750252394],[3.16665689086227,51.2947977032766],[3.16701528461745,51.2943748910211],[3.16739036185694,51.2939499291836],[3.1678529909035,51.2935698889541],[3.16841581349436,51.293102791269],[3.16875438456576,51.2928026084682],[3.16893711641016,51.2924533348103],[3.16933916629921,51.2918409101042],[3.16957291458633,51.2913044219949],[3.1696306777941,51.290927229207],[3.16953928432454,51.2906006738722],[3.16951627874094,51.2905610408977],[3.1694340004465,51.2904547547911],[3.17036310933272,51.2901871968778],[3.17104525016302,51.2900364944476],[3.17180177053004,51.2899398456262],[3.17249144240489,51.2897834168881],[3.17300096348158,51.2895892424313],[3.17346356730454,51.2892787098291],[3.17375108312653,51.2888771798559],[3.17386765980232,51.288439160413],[3.17396641754741,51.2880473141665],[3.17418639373682,51.2876126547226],[3.17449535670166,51.2873109982228],[3.17491816336889,51.2871819946244],[3.17509876978688,51.2871293496488],[3.17534454403696,51.2870576608446],[3.17577305062904,51.2867780641417],[3.17652015851627,51.2860358242474],[3.17691658967854,51.2855646941437],[3.17721463378567,51.2851829616662],[3.1775603133584,51.2849616256263],[3.1779900492843,51.2845603564639],[3.17832776780491,51.2839994016976],[3.17861685890206,51.2833162804446],[3.17861429841675,51.2829825122503],[3.17856268800088,51.2826158039971],[3.17849900536076,51.2822153683288],[3.17844302124944,51.2818752690015],[3.17855891708002,51.2818231274318],[3.17879070796253,51.2817188439488],[3.17880812004049,51.2811094749196],[3.17892753307715,51.2804130593557],[3.17917807743073,51.2799358204691],[3.17934967237653,51.2795110944196],[3.17933617139826,51.2791714217604],[3.17932987941229,51.2789836281538],[3.17937192661097,51.2787117253581],[3.17959080289983,51.2783164443348],[3.18001623406276,51.2777911294661],[3.18038873916675,51.2773846415663],[3.18063448043445,51.2770220753429],[3.18078243853979,51.2766538925369],[3.1808144695859,51.2762671643712],[3.18093124600716,51.2759624042453],[3.18106532667062,51.2757760182642],[3.18142234598583,51.2757587389273],[3.18151764807326,51.2754989573376],[3.18107300180526,51.2753299452897],[3.18113626249181,51.2747326227254],[3.18132743485327,51.2739731872523],[3.18163319019993,51.2732844298128],[3.18195822671354,51.2724185633684],[3.18230651226599,51.2716549060325],[3.18265392037281,51.2709978513779],[3.1834743958537,51.2711335376099],[3.18466099047839,51.2714015096768],[3.18638593131092,51.2717130871141],[3.18648525394389,51.2717303023342],[3.18624585994951,51.2725008527338],[3.18608980034422,51.2729720974863],[3.18591850256472,51.2733157183932],[3.18631493480889,51.2732733238407],[3.18668180995784,51.2733036392951],[3.18735572005088,51.27346564695],[3.18796173346831,51.2736825976427],[3.18855561568957,51.2738681358619],[3.18929368815432,51.2739774654944],[3.1901356654401,51.2739962770258],[3.19022373738851,51.2740933362992],[3.19037285076704,51.2742605326133],[3.19188815549819,51.274392641296],[3.19333851924778,51.2762206102699],[3.19356308201557,51.2759609435921],[3.19386071032224,51.275441265043],[3.19407500285814,51.2748558648186],[3.19416487428079,51.2743688894703],[3.19410171837205,51.2740159792625],[3.19392950424769,51.2733722799932],[3.19377277176541,51.2727009219535],[3.19361341432848,51.2721338320898],[3.19365774476845,51.2718410880757],[3.19373346587326,51.271475649195],[3.19374264520968,51.2711848739744],[3.19347971060157,51.2708427276876],[3.19302839238965,51.270425704295],[3.19253799645677,51.2698738665334],[3.19249847680538,51.2698294384346],[3.19190410756553,51.269152570054],[3.19098837398796,51.2681816357666],[3.19041418765281,51.2675849191986],[3.1903341017376,51.2675377689613],[3.18964261994679,51.2671241354377],[3.18957402647269,51.2670608754344],[3.18867019334018,51.2662070821886],[3.18839729649675,51.2659691190229],[3.18816324167019,51.2657292247756],[3.18807319639021,51.2656379379321],[3.18778407028973,51.2653117400157],[3.18736205426909,51.2648358847215],[3.18713434347436,51.2645647629779],[3.18680718584883,51.2642092119995],[3.18627003418217,51.2636128430185],[3.18539301071746,51.2626538359435],[3.18495700643584,51.2621488603634],[3.18498561683436,51.2621132224796],[3.18662214568783,51.2599984725565],[3.18708265161254,51.2593912036094],[3.18732906454668,51.259069188313],[3.18739211079214,51.2589863811315],[3.18746090160483,51.258895519372],[3.18749153067166,51.2588529479923],[3.18760053434173,51.2587057043326],[3.18782384400576,51.258420540294],[3.18803771355747,51.2581433935464],[3.18871347992763,51.2572752086099],[3.18915148250257,51.2566792955609],[3.18977008909538,51.2558789063955],[3.19028367350119,51.2552142114717],[3.19038876229293,51.2550750380978],[3.19050343317817,51.2549220539368],[3.19106165521029,51.2541708869607],[3.19122042118425,51.2538804389526],[3.19136626169414,51.2535898621652],[3.19146905556161,51.2533950407213],[3.19148065942712,51.2533742970205],[3.19144082712144,51.2531965985392],[3.19141716907053,51.2529634366154],[3.19159430270969,51.2526766472186],[3.19167379874787,51.2525267886076],[3.19176267134607,51.2523712289709],[3.19184582938995,51.2522225654857],[3.19192895765747,51.2520750604818],[3.19200056986169,51.2519448235297],[3.19205281372772,51.2518503180283],[3.19274755719349,51.2511016586289],[3.19282942276874,51.2505647702811],[3.19040385790865,51.2502405101886],[3.18902815094746,51.2500228516158],[3.1884625825561,51.2498978530311],[3.18811195226993,51.2497437069861],[3.18782965758167,51.2495890827954],[3.1874477109931,51.2493592975772],[3.18644012945233,51.2488254412522],[3.18605110582305,51.2485839922112],[3.18571327451568,51.2483627538113],[3.18509281755604,51.2480007861936],[3.18491294765785,51.2478854207523],[3.18477664662316,51.2477994619143],[3.18427123464052,51.2474884707341],[3.18378962070431,51.2471858274421],[3.18332017857371,51.2468404267696],[3.18258562968245,51.2463196998524],[3.18156171218044,51.2455619793378],[3.18046960449738,51.2447282398427],[3.17973755746178,51.2441843423463],[3.1793757196188,51.2438933128902],[3.17923419857496,51.2437957063894],[3.17889670041859,51.2435640211575],[3.17853203361012,51.2433842097928],[3.17820866924296,51.2432500077673],[3.17785782698995,51.2431074164183],[3.17744735934116,51.2429862419388],[3.17604868558225,51.2425943707237],[3.1755474805233,51.2424120149908],[3.17514086480678,51.2422850769468],[3.17373871814952,51.2418861897848],[3.17341404150049,51.2418041092711],[3.17327236106815,51.2417134468498],[3.1726726564114,51.2412693426051],[3.17231395514231,51.2410745067335],[3.17219743516672,51.2410107508484],[3.17140160363229,51.2407280545288],[3.17045586460807,51.2404600588521],[3.16977689513978,51.2402283651251],[3.1686905175879,51.2399739952191],[3.16795752878095,51.2398332922808],[3.16697470021115,51.2396448526925],[3.16612494510392,51.2394508041295],[3.1642653146394,51.2387585983636],[3.16411368499205,51.2386967946361],[3.16386885767695,51.2385981174249],[3.1615650617554,51.2376660978426],[3.15977063136067,51.2368852528256],[3.16056103547473,51.236303468496],[3.16142106691819,51.2355983919284],[3.16193056151533,51.23517017752],[3.1625970601727,51.2347377671284],[3.16251972067673,51.2344449473676],[3.16251676872727,51.2341308675907],[3.1626409109293,51.2338273541459],[3.1629539237286,51.233429580379],[3.16342841906664,51.232925677277],[3.16379000628593,51.2326477581864],[3.16429668368435,51.232183580428],[3.16480985045857,51.2321111596832],[3.1655902999614,51.2319811943918],[3.16569206296321,51.2319717994182],[3.16580823009951,51.2319764570606],[3.16667408545004,51.2323282776934],[3.16685691966085,51.2323961897117],[3.16706065045767,51.2324411365724],[3.16722429098667,51.2324659754612],[3.16806726543866,51.232488438668],[3.16877687021645,51.2324573949494],[3.16916139179771,51.2324346402451],[3.16934899339294,51.2324608779541],[3.1695475796303,51.2324188543054],[3.16973217832339,51.2322747094351],[3.17000898753736,51.2318464203948],[3.17023266533426,51.2312588294725],[3.17042943104327,51.2309282311965],[3.17063181928014,51.2307379109113],[3.17076298317812,51.2304460488109],[3.17079765579506,51.2302459180128],[3.17088212069154,51.2300474501576],[3.17106042557112,51.2298603618694],[3.17146756653924,51.2294588833202],[3.17194710628696,51.228897054891],[3.17271191177279,51.2280066760235],[3.17292468482061,51.227626404528],[3.17303475282089,51.2272926077604],[3.17326109420155,51.2264547247409],[3.17339189866841,51.2261037542367],[3.1734896215101,51.225963361136],[3.17321484439758,51.2258829414102],[3.17242161798612,51.2256524225742],[3.17129065677243,51.2252782586969],[3.1716994801652,51.2248095823769],[3.17200128703221,51.2244835203978],[3.17226202075837,51.2241037348279],[3.17319173242259,51.222896333989],[3.17222771671291,51.2226351154729],[3.17141131053525,51.2224472322553],[3.17081853864202,51.2223183921842],[3.17084859443146,51.2224415355107],[3.17091885465746,51.222795698679],[3.17103410984322,51.2231225047082],[3.1710102147763,51.2231906353988],[3.17084267677296,51.223175032746],[3.17013613339196,51.2229488520414],[3.16918499114134,51.2226182074816],[3.16903751217592,51.222612076508],[3.16892210790607,51.2227221565273],[3.1684241749974,51.2232826283],[3.16834700938247,51.2233409471067],[3.16783192489975,51.2233484668666],[3.16761838160563,51.2233277571815],[3.16696665658208,51.2228367352819],[3.16677836046466,51.2226957591779],[3.1665524544525,51.2228684513975],[3.16592643076616,51.2232421937254],[3.16539809317134,51.2236204030554],[3.16505054708635,51.2238579100408],[3.16465438692609,51.2239767176058],[3.16419880459066,51.224038134742],[3.16375631585807,51.2240927303458],[3.16328089616985,51.2240647097354],[3.16287449193554,51.2240084192234],[3.16258928595885,51.223832841646],[3.1623891925301,51.2236488604192],[3.16220705423451,51.2234129132502],[3.16215073713538,51.2231643428129],[3.16212039638933,51.2227677031609],[3.16213481478206,51.2223529782078],[3.16218888398309,51.2221889714978],[3.16221622453893,51.2220594579677],[3.16239232916945,51.2218862660053],[3.16281554642514,51.2216483792292],[3.16329143520679,51.2213716264439],[3.16114615895228,51.2206938306548],[3.16145770306628,51.2204212016149],[3.16098112199367,51.2202969739487],[3.1603139367672,51.2201221251345],[3.1594449752533,51.2199718637248],[3.15838363143359,51.2197686375962],[3.15726071521583,51.2195207344505],[3.15659040722091,51.2193249727945],[3.15626929836493,51.2191837771015],[3.15593264970845,51.2190725516328],[3.15506378215516,51.218919940853],[3.15427195026105,51.2187854975393],[3.15397066697613,51.2187337315582],[3.15372448741642,51.2186918017397],[3.15363998802598,51.2186770273822],[3.15329264619962,51.2186224687841],[3.15169010591714,51.2183707415913],[3.15029371441681,51.218210348806],[3.14870372751195,51.2179030845295],[3.14820471874578,51.218074084138],[3.14751708229628,51.2182605173493],[3.14683670442193,51.2183809662146],[3.14613521769995,51.2184617915615],[3.14542696530309,51.2184486746127],[3.14497360890956,51.2183559112697],[3.14532492766166,51.2181880331774],[3.14575231317975,51.2179340255621],[3.14614458993749,51.2176112804075],[3.14532940131019,51.2174545167469],[3.14426649374618,51.2171746610493],[3.14361035151667,51.2170751573731],[3.1430304553259,51.2169532627981],[3.14247757612462,51.2167864495855],[3.14172938443848,51.2163985816684],[3.14117939679204,51.216052167587],[3.14125028496683,51.2156021033211],[3.14206922690941,51.2140704625183],[3.14292036760192,51.2124348511282],[3.14367776657581,51.2114159400615],[3.14373898137794,51.2113331354811],[3.14376768334576,51.2112940311834],[3.14612063819804,51.2114840971717],[3.14619682464889,51.2113226430088],[3.1462261316596,51.2112603669987],[3.14629181996211,51.2111474767729],[3.14644043350726,51.2108975380909],[3.14654950506344,51.2105370979547],[3.14661904540372,51.2102770708685],[3.14657300738866,51.2101328952407],[3.14646175240936,51.2099428496417],[3.14731162983383,51.2087695826597],[3.14800371386751,51.2077731468262],[3.148314165655,51.2074008769874],[3.14877283032309,51.2069339491466],[3.14900629290736,51.2065423412809],[3.14925541441923,51.2061161282841],[3.14926118958171,51.2061069168708],[3.14951019630222,51.205331881866],[3.15173454883397,51.2030857248544],[3.15194741243182,51.2028457112612],[3.15223052996081,51.2024580844688],[3.15245620442545,51.2021509871768],[3.15265324761795,51.2018806788992],[3.15284454481464,51.2016184233077],[3.15332851834747,51.2008840385377],[3.15393770232886,51.2002992739097],[3.15395472131134,51.2002832245474],[3.15442883125395,51.1998558351274],[3.1546871480608,51.199427387149],[3.15504380200221,51.1986928467433],[3.15557945590749,51.1978836563395],[3.15601882157019,51.1971592324723],[3.15652159802386,51.1964783354031],[3.15694915954925,51.1958522912088],[3.15697796123383,51.1958085492086],[3.15763479485401,51.1958709054196],[3.15857309828867,51.1936137562932],[3.1596805232248,51.1922286434938],[3.15927518113725,51.1921422171521],[3.159451955535,51.1917256717344],[3.15967555715399,51.1912099416968],[3.1598371112066,51.1907399316966],[3.1598811291493,51.1903220278293],[3.16006321229482,51.1899136477493],[3.16030311982143,51.1895510546383],[3.16042073111318,51.1888546136439],[3.16061653477046,51.1882006910969],[3.16082880537118,51.1874090300901],[3.16122545376731,51.1866180933022],[3.16141908125472,51.1861901278472],[3.16188193901989,51.185333808948],[3.16129705453919,51.1852756862577],[3.16094013544376,51.1852442266879],[3.16077231736415,51.1852448295329],[3.16051622136734,51.1852364176758],[3.15988414250638,51.1852206840149],[3.15915879633096,51.1851750206306],[3.15829165301397,51.1851221063842],[3.15776183986885,51.1850738010934],[3.15741873092387,51.1850077059764],[3.15694082916283,51.1848776485785],[3.15643001828892,51.1847368217787],[3.15605085682745,51.1846390631285],[3.15501217571307,51.1843757663466],[3.15390035010763,51.1842310731361],[3.15324736526839,51.1840273503884],[3.15278275134848,51.1838835059847],[3.15150630161256,51.1834763482097],[3.15057407598905,51.1832338090208],[3.15013634306435,51.1831203619522],[3.14919766864119,51.1827722870204],[3.14833589297231,51.1823044747654],[3.14793284843889,51.1819932086749],[3.14759489717925,51.1817312867346],[3.14728704381369,51.1815171890003],[3.14535146380146,51.1810776540258],[3.14528184248192,51.1810607089845],[3.14413802019681,51.1808043385378],[3.14430700746982,51.180758575134],[3.14430895199837,51.1806844267252],[3.1443117776304,51.180576679815],[3.14347876316515,51.1801404186491],[3.14340473905991,51.1800805481157],[3.14294978212464,51.1797119406533],[3.14261612214057,51.1793584964017],[3.14231098101985,51.1789022062991],[3.14132154002559,51.1785268855466],[3.13995547704437,51.1781012855534],[3.13869017337865,51.1777010548208],[3.13776266074199,51.1773564791328],[3.13746970802188,51.1772792585607],[3.13732025834042,51.1772834958341],[3.13719388369683,51.1773215811088],[3.13696393367295,51.1774420266009],[3.13661192209416,51.1777164899753],[3.13644417854881,51.1778549663142],[3.13636914439857,51.1779735492474],[3.13629823277975,51.1781454839192],[3.13626451294873,51.1782355254448],[3.13628295339714,51.1783052509608],[3.13628148551224,51.1783608622184],[3.13627064307386,51.178631928638],[3.13616236188772,51.1789622409459],[3.13600315580255,51.1791263011966],[3.13583210890377,51.1791801434931],[3.13565991466269,51.179137785989],[3.13559748180377,51.1790583302846],[3.13555733705706,51.1788330873832],[3.13554088804953,51.1784087631594],[3.13559669126925,51.1779712861452],[3.13571411387684,51.1775043208942],[3.1358565813528,51.1771361221809],[3.13621806502032,51.1764329713964],[3.13636578790515,51.1761447900604],[3.13643181754465,51.1760180009671],[3.1367122758827,51.1755202856559],[3.1369964849467,51.175089824248],[3.13732510736984,51.1742333540956],[3.13731186004033,51.1741764305221],[3.13728389892103,51.1741181947263],[3.13727308506845,51.1741088109281],[3.13724451295314,51.1740737465213],[3.13723790463334,51.1740447054437],[3.13724041987284,51.1740192361107],[3.13723992122079,51.173968239823],[3.13722929073917,51.1739519046001],[3.13722652129742,51.1739171090845],[3.13725382098475,51.1738606080495],[3.13729365521295,51.1738181442922],[3.13732907005475,51.1738034477928],[3.13739765948469,51.1737890969691],[3.13746047538266,51.1737839570563],[3.13759870291817,51.173785397243],[3.13770523237318,51.1738004137192],[3.13784085344835,51.1738307986781],[3.13794713879151,51.1738550834978],[3.13917719980078,51.1736291577367],[3.13929223013954,51.1736013823742],[3.1388551216907,51.1726986953583],[3.13853085892186,51.1718516489089],[3.13811550247705,51.1711740092579],[3.13785201065671,51.1706798956078],[3.13742296035101,51.1696834155551],[3.13731889509582,51.1694354874222],[3.1370482144941,51.1687952763139],[3.13681138426444,51.1681299216891],[3.13668722038421,51.1677357629264],[3.13662132452824,51.1673688660972],[3.13661487037272,51.1673340320475],[3.13643710597592,51.1661072295077],[3.13642733350621,51.1660584541129],[3.1364223555708,51.1660375421347],[3.13627850876899,51.1653418652208],[3.13604773886254,51.1645178028048],[3.1358925256416,51.1639738213291],[3.13579977408849,51.1636472044236],[3.1355837079484,51.1628951452614],[3.1355252952621,51.1628736754535],[3.13522741243909,51.1629169214051],[3.13516715728643,51.1628954321816],[3.13513407558747,51.1628220764451],[3.1348681890236,51.1621425056949],[3.1345418180685,51.1615202469524],[3.13438655709948,51.1611883398481],[3.13411428025064,51.1606118416678],[3.13444218064093,51.1605480521505],[3.13480582847655,51.1605263553374],[3.13550478197887,51.1605093170769],[3.13560271022988,51.160499909269],[3.1370343820298,51.1603734596875],[3.13826775806018,51.1602182730187],[3.13919255786768,51.1601630038526],[3.14044209161316,51.1600937208935],[3.14172979661522,51.1600445224077],[3.14258273171996,51.15998848032],[3.1448309246864,51.1598576608314],[3.14586009428476,51.1598277575882],[3.14599441382087,51.1598361012826],[3.14607790033514,51.1592517246916],[3.14658500227379,51.1592407475348],[3.14719072405325,51.1591937034612],[3.14756486498551,51.1591929360782],[3.14760177479951,51.1591909998344],[3.1481240089826,51.1591651069019],[3.14882339109226,51.1591306111093],[3.15021025348323,51.1589525485508],[3.15149604324419,51.1588336907373],[3.15282773396556,51.1586503935419],[3.15444540818116,51.1583831046251],[3.15497167564353,51.1583433163022],[3.15629754890709,51.1582410427803],[3.15710944942652,51.1582018584312],[3.1578377787148,51.1581873074785],[3.15930351071553,51.1582347717204],[3.15953263170783,51.1582116216767],[3.16027712088482,51.1583559889394],[3.16053494180391,51.1583632616617],[3.16097657175074,51.1583179454062],[3.16175828589613,51.1582343827129],[3.1623589906063,51.1581663498427],[3.16243482162383,51.1583699297602],[3.16213478185001,51.1586415221714],[3.16212208119594,51.1587051313263],[3.16230174349077,51.1587417329299],[3.16425665403464,51.158901906775],[3.16445188533408,51.1589780660111],[3.1646783404709,51.1591298708763],[3.16483130720362,51.1592728141733],[3.16542324436004,51.1598316344472],[3.16560854512011,51.1600073548406],[3.1658629304455,51.1602915548593],[3.16590025084052,51.1603452436546],[3.16604228250874,51.1605552893436],[3.16607914201068,51.1607700586524],[3.16606593208362,51.1609252150022],[3.16601597646267,51.1612190636565],[3.16596910866997,51.1615361214309],[3.16596259648165,51.1615742983857],[3.16603953853578,51.1618787099375],[3.16624256951015,51.1622968167973],[3.16648376211891,51.1627361714984],[3.16665331158961,51.1630948335549],[3.16682664994178,51.1633063553809],[3.16696059012575,51.1634015876258],[3.1675281581312,51.1637642962274],[3.16808450411615,51.1640619903684],[3.16843546351889,51.1642475013282],[3.16892241391835,51.1648075530796],[3.16945903658608,51.1655152850515],[3.16961191840327,51.1657347069205],[3.16988392320708,51.1661245343247],[3.16996440542066,51.166435931685],[3.16997569331848,51.16692973048],[3.17003183640648,51.1671122447248],[3.17005570257579,51.1671878142468],[3.17015158628158,51.1672583199244],[3.170249223877,51.1673323199583],[3.17045210939762,51.1673274244159],[3.17178301407825,51.1670372871579],[3.17259243411364,51.1668843994479],[3.17322221047834,51.166764455164],[3.1754580399198,51.1663327749456],[3.1777351954974,51.1658690206439],[3.18037483500903,51.165355560681],[3.18269641309674,51.1648805695068],[3.18469997458168,51.1644429073117],[3.18715369560793,51.1639865366654],[3.18861172012409,51.1636905293629],[3.18913763856518,51.1635926410653],[3.19014132618699,51.1634056482242],[3.19234674343197,51.1629976839807],[3.19302844754669,51.1628607687875],[3.19308217528127,51.1628497146469],[3.19401388163645,51.162665449491],[3.19406208106153,51.1626543399399],[3.19593184230918,51.1622522425413],[3.19698944979105,51.1619706991638],[3.1981474149169,51.1616553744688],[3.19883770047272,51.1614686792935],[3.19920415534081,51.1615545878761],[3.19947347689218,51.1616186742092],[3.20035655731957,51.1618290555183],[3.20609394486985,51.1633840826829],[3.21213743961183,51.1650229444754],[3.21243222413384,51.1651023154087],[3.2135624405744,51.1653115381778],[3.21496234765221,51.1655720565006],[3.21603020343665,51.1658443844035],[3.21635745471201,51.1659530339389],[3.21645619008504,51.1661347809126],[3.21651365567714,51.1664204238122],[3.21660613367437,51.1668559025002],[3.21671381399295,51.1671234928825],[3.21685148082273,51.1672963480036],[3.21733504392192,51.167868907958],[3.21764475813162,51.1681662787409],[3.2180758353342,51.1685505869585],[3.21845534768363,51.1689332326515],[3.21910758812225,51.1696940045669],[3.21950723757193,51.1701579633208],[3.22013049936721,51.1707492521865],[3.22084518505847,51.1713715561849],[3.22185050132222,51.172170506755],[3.22252990671093,51.1727298785336],[3.22290859408499,51.1729236052329],[3.22326727106847,51.17303138053],[3.22331309126599,51.1730422544654],[3.22368869837745,51.1731362861501],[3.22424248104955,51.1734070312626],[3.22463736924357,51.1736924596209],[3.22507051537213,51.1738461460463],[3.22550474216333,51.1739558043775],[3.22586975623583,51.1740311846429],[3.22652955122161,51.1741140487194],[3.22780553999224,51.1743291760317],[3.22831778188843,51.1744152408781],[3.22877899404908,51.1746282864466],[3.22948623228505,51.1749584297495],[3.22971731885059,51.1751588230996],[3.22972063772643,51.1751739203303],[3.22976014723722,51.1752925053288],[3.22952862097257,51.1756390920459],[3.22860533864664,51.1769084161846],[3.22871859835433,51.1769512278684],[3.22915524836883,51.1771142034157],[3.22981479474925,51.1773604459852],[3.23003040076095,51.1774401673972],[3.23042503300444,51.1775876680634],[3.23053466606619,51.1776281253056],[3.2317861873114,51.1780956047584],[3.23292760567291,51.1784669858427],[3.23371851084879,51.1788477375775],[3.23385702260072,51.1789139639588],[3.23394995964128,51.1789588930824],[3.23400639732054,51.1789884065021],[3.23415568806165,51.1790663246299],[3.23425946019376,51.1791206284102],[3.23428855863905,51.1791371317828],[3.23428104294186,51.1794464757921],[3.23426248282854,51.1795274179751],[3.23436518716596,51.17947393724],[3.23468910049829,51.1793460942439],[3.23507691161787,51.1795479800172],[3.23628346409731,51.1797449645514],[3.23617663562099,51.1801205708379],[3.2360693557435,51.1805147144412],[3.23689450774186,51.1804739469092],[3.23956389147273,51.1804137233986],[3.23984245032695,51.1813226127798],[3.24051053056773,51.1813730283724],[3.24083609823491,51.1821687953493],[3.24117028304618,51.182226450173],[3.24201391916441,51.1823376334996],[3.2431752136506,51.182427500067],[3.24327484214771,51.1825014568224],[3.24463867160446,51.1844416151997],[3.2449477744332,51.1846995028437],[3.2453634665348,51.184895824367],[3.24608368256649,51.1851576152002],[3.24642134341164,51.1849951051098],[3.24655742408971,51.1849338187964],[3.24711294343993,51.1846829839548],[3.24786249692298,51.1844142860477],[3.24851943147902,51.1842397319617],[3.24905514544282,51.1841219688876],[3.24967215357758,51.1839203765522],[3.25008581946503,51.1837400339493],[3.25015865858803,51.1837013221448],[3.2503790742005,51.1835828867127],[3.25178938142356,51.1837480317535],[3.25467324849805,51.1841333333654],[3.25741377929769,51.1845774770002],[3.25972344517225,51.1849978144476],[3.26087314800229,51.1851916940441],[3.26103403012258,51.1851723423863],[3.26228343504842,51.1854389912608],[3.26357852565621,51.1856457935735],[3.26497640147033,51.1858732418242],[3.26573005409764,51.1860517865045],[3.26643503013524,51.1861835183657],[3.2668389210321,51.1862591326707],[3.26771106822598,51.1864179097176],[3.26775046653106,51.1863893053917],[3.26788472108451,51.1862480170449],[3.26827505307102,51.1858819779143],[3.26836385772602,51.1857912553558],[3.26847576763166,51.1856590291478],[3.26857645180529,51.1855336514645],[3.26865910948207,51.1853907231701],[3.26878553280247,51.1851902595045],[3.26972503938455,51.1835835591356],[3.27066704157381,51.1821031889924],[3.27107787438535,51.1814116934901],[3.27149802871131,51.1806368456332],[3.27181481905532,51.1800232763568],[3.27188533568655,51.179925428275],[3.27193313340955,51.1798528640945],[3.27198591669185,51.1798035232142],[3.27204013500934,51.1797715784195],[3.27287130594302,51.1794721916779],[3.27312711318206,51.1795707479508],[3.27374036239269,51.1796795687652],[3.27596240527847,51.1794278033011],[3.27823321924906,51.1792181648915],[3.27986618477013,51.1790837280982],[3.28081089066999,51.1789730658029],[3.28179868895494,51.1788326621571],[3.28211865641006,51.1787892501827],[3.28256461350341,51.1787191828079],[3.28270689673843,51.1787054252125],[3.28286025079018,51.1787705710183],[3.2837465966288,51.1794253493856],[3.28534708119952,51.1806904292723],[3.28585131433134,51.181049657788],[3.28613105772403,51.1812306830825],[3.28656696401256,51.181356353918],[3.28702457255507,51.1814208027436],[3.28865573478817,51.1814461486683],[3.28997798448511,51.1814350465837],[3.2900061532291,51.1818119292594],[3.28978193262197,51.1838552486298],[3.28969807844003,51.1846911706663],[3.28966606095153,51.1848797704082],[3.28958905690905,51.1849404863289],[3.28853104137084,51.1854812750962],[3.28744428226214,51.1859881850348],[3.28690849197604,51.1862718357662],[3.28647787980265,51.1863930496802],[3.28383738702026,51.1867860311313],[3.28430318698206,51.1870556809942],[3.28583742529901,51.1878496488084],[3.28612626647429,51.1880377096859],[3.28634759288968,51.1881950216926],[3.28650557419066,51.1883007641696],[3.28665106078289,51.1887864934398],[3.28708056717118,51.1887139402023],[3.28766804585962,51.1885883643766],[3.28784597766389,51.1885494317692],[3.28794304871678,51.1885781315499],[3.28801640646048,51.1887549466749],[3.28806887415235,51.1888782639003],[3.28817484293034,51.1892396333635],[3.28807344567444,51.1894774286034],[3.2876897940323,51.1900382785011],[3.28743406587304,51.1904102466752],[3.28691914261391,51.1912236802602],[3.28666928231779,51.1915806354424],[3.28646881724832,51.1917955044162],[3.28615373848689,51.1920220709038],[3.28592094036175,51.192199559867],[3.28540857493169,51.1927418406502],[3.2844269050718,51.194035382348],[3.28582465556794,51.1944421995223],[3.28380174749298,51.1953820179001],[3.28251757470339,51.1959589198714],[3.28202079504661,51.1962243655606],[3.2817015450998,51.1964694234213],[3.28132779889332,51.1968368166422],[3.28097693097251,51.1971719715466],[3.28061193441404,51.1975591433324],[3.28166314909717,51.1981181039363],[3.28511157542403,51.1992599269871],[3.28789937144429,51.2001823842664],[3.28933146427403,51.2006288714819],[3.28947688004622,51.2007217470989],[3.28958995451164,51.200857204453],[3.28960606979215,51.2008782106301],[3.28961965874236,51.2011680445067],[3.28954336496818,51.2014361989898],[3.28941211503149,51.2017675879754],[3.28936030289073,51.2020139478009],[3.28941805375608,51.202148900243],[3.28968607670781,51.2022046527996],[3.28980025736405,51.2022126476546],[3.28989730817914,51.2021637030189],[3.28999837207501,51.2020209289602],[3.29005664039578,51.2019739480849],[3.29029210986051,51.2020015901923],[3.29071448238016,51.202163043427],[3.29113215443119,51.2022885282872],[3.29188940634617,51.2024866346876],[3.2924422484666,51.2026701287071],[3.29287289280056,51.2027934076964],[3.2932577002713,51.2029046798602],[3.29443562900864,51.203259561322],[3.29549594182642,51.2035959809293],[3.29628250237633,51.2038047542342],[3.29714984628008,51.204030477963],[3.29800906689857,51.2042086094018],[3.29840199292674,51.2042886494714],[3.2987468887055,51.2043717301741],[3.29916006384178,51.2045342282398],[3.29981086692352,51.2047116200869],[3.30080326135097,51.2049558293617],[3.30111412023556,51.2050756784106],[3.30162030141834,51.2053664791098],[3.30197884393571,51.2055794628428],[3.30254370410615,51.2062091683248],[3.30349267101916,51.2070648271801],[3.30414228159615,51.2077010817871],[3.30455047514913,51.2082459303992],[3.30502011878234,51.208928072317],[3.3050289186688,51.2089466927796],[3.30544621373532,51.2097407685896],[3.30628179813766,51.2112060875038],[3.3070457842365,51.2126580094372],[3.30777266061379,51.2141211806333],[3.30836525312096,51.2153247236414],[3.30867653173119,51.2159984753457],[3.30920021059666,51.216744817107],[3.30946495861039,51.2171933368287],[3.30961406583946,51.2176153263357],[3.30975795678342,51.218023362938],[3.31001644009649,51.2198056345734],[3.31021706015834,51.2215363981925],[3.3101967154244,51.2220263993429],[3.31007431861134,51.2221342337368],[3.3059634700077,51.2232388204694],[3.30407578770905,51.2237155083867],[3.3031687844653,51.2239159316648],[3.30194735735441,51.2242270783551],[3.30055112129194,51.2245957345571],[3.29929693732217,51.2249656585106],[3.29822022790458,51.2252409926082],[3.2973158132596,51.2254066299877],[3.29690625468883,51.225480561854],[3.29513532191381,51.225848077299],[3.29449150132662,51.2259163984501],[3.29419157207236,51.2259577103132],[3.29405824035377,51.2259773582132],[3.29393782462928,51.2259971232947],[3.29369889143444,51.2260343526855],[3.29336839650483,51.2261205790096],[3.292753478764,51.2262957655579],[3.29163105131149,51.2266297245765],[3.29154820367037,51.2267807767384],[3.29137446048006,51.2268719010178],[3.29087455144428,51.2267016356425],[3.28865051329625,51.2259895335372],[3.28651620170796,51.2253106567663],[3.28539283359238,51.2249689507097],[3.28524448264525,51.2249200802117],[3.28438553475163,51.2246364094468],[3.28455497620128,51.2248894283756],[3.28525819810285,51.2275078711622],[3.28504796620513,51.2275801108615],[3.2845907023619,51.2275608571336],[3.28255127564625,51.2269279730763],[3.28231287468318,51.226783248236],[3.27974066700605,51.2268395608049],[3.2786278331317,51.2263634631899],[3.27855269967751,51.226419553618],[3.27794543685456,51.226817229685],[3.27700212424535,51.2274574744346],[3.27625188405496,51.2279697055904],[3.27527881067579,51.2286177737546],[3.27441263084588,51.2291926575279],[3.27479066091895,51.2294429839794],[3.27406535952846,51.2299125552377],[3.27349277477769,51.2303232766084],[3.27363539983374,51.2304590209441],[3.27478373014609,51.2315485131499],[3.27484152974694,51.2316811539988],[3.27458590549869,51.2320345510964],[3.27320260469986,51.2335618357406],[3.27220015104459,51.234746144114],[3.27181437029264,51.2352165294788],[3.27140535310209,51.2356542509248],[3.27082877411093,51.2362306346805],[3.26984528093524,51.2372320040839],[3.26938077729609,51.2376726797635],[3.26876161673891,51.2382521343654],[3.26803025205498,51.2388919600639],[3.26738221165927,51.2394421681929],[3.26692255855669,51.2398318910023],[3.2667208527415,51.2400084723577],[3.26666810522797,51.2400531754431],[3.26654933395653,51.2401575226553],[3.26647766345686,51.240221749486],[3.26641185854361,51.2402721249823],[3.26616183144784,51.2404621612389],[3.26606217274592,51.2405388741718],[3.26600223287971,51.2405753981632],[3.26595245310118,51.2405726166795],[3.265951631146,51.2406073738285],[3.26558821579856,51.2408299582776],[3.26510609357354,51.2410757701172],[3.2645461153863,51.2413347596],[3.26444325450093,51.2413905824253],[3.26439088736803,51.2414190644782],[3.26420196856472,51.2415227547995],[3.26414023510034,51.2415569434659],[3.26292813586562,51.2422223797558],[3.26170933685505,51.242935253009],[3.26108234860728,51.2433709000143],[3.2607529381435,51.2434813818121],[3.26045749477726,51.2435608924404],[3.26011626269093,51.2437025501139],[3.2594758328369,51.2440812802928],[3.25845830232333,51.2447114121862],[3.25784795920015,51.2450660805132],[3.25720517219477,51.245542117862],[3.25613421260968,51.2461647752796],[3.25522405273903,51.2467020239206],[3.2548076611936,51.2469739068062],[3.25480649866097,51.2470225665814],[3.2550690882482,51.24762415068],[3.25523444205725,51.2480452013205],[3.25528342790536,51.2486227573797],[3.25521351956155,51.2486893116633],[3.25471098953633,51.248624324363],[3.25467726392975,51.2488766309778],[3.25447489069633,51.2488457555296],[3.25270702326185,51.2485706827818],[3.2525640249744,51.2489135058837],[3.25245841176485,51.2489287335414],[3.25221333093091,51.2489078809],[3.25096461302798,51.2486979366727],[3.25027912478278,51.248562831907],[3.24971904230697,51.2485111854349],[3.24898433940358,51.2484265962362],[3.24863431746463,51.2483931551053],[3.24858621044027,51.2481667285268],[3.24824327690069,51.2482225830142],[3.24820152281565,51.2482696996913],[3.24809644338484,51.24857000007],[3.24785923485293,51.2489130846977],[3.24754464196929,51.2494026069524],[3.24715608750881,51.2498960628935],[3.24670834372443,51.2504700744066],[3.24640426974333,51.2509052283845],[3.24618630725918,51.2512148860647],[3.24625559581712,51.2512514667168],[3.24633375259066,51.2513031961565],[3.24642581409559,51.2513909809909],[3.24705644556514,51.2521189068497],[3.24721601707416,51.2523174191251],[3.24750349299221,51.2526492487832],[3.24783461348694,51.2530093027253],[3.24817863482751,51.2533706365789],[3.24828295920472,51.253486347699],[3.24865088641084,51.2539290240348],[3.24878465116876,51.2541261309334],[3.24885613570468,51.2542253072629],[3.24893276971823,51.2543407557945],[3.24905792738506,51.2545887691886],[3.24913241014266,51.2547169442848],[3.24929843862679,51.254954914462],[3.25114652364404,51.2572853859941],[3.25304994968528,51.2595491345959],[3.25491295565734,51.2618889506453],[3.25526758795801,51.2623523373725],[3.25546369091625,51.2625708804951],[3.2556550029367,51.2627580901067],[3.25584507847331,51.2629197937436],[3.25602823907233,51.2630617321526],[3.25614208663528,51.2631670956247],[3.25624080225407,51.263287381452],[3.25651435589089,51.2635889264233],[3.25998964483234,51.2679728747149],[3.26019527615158,51.2682587095714],[3.26033376142336,51.2684164458958],[3.26071727428689,51.2688348906164],[3.26093264387055,51.2690999564614],[3.2610171052535,51.2691992457752],[3.2610924979071,51.2692914973134],[3.26132785928408,51.269648295675],[3.26155660741223,51.2699725848574],[3.26199365616087,51.2705491241359],[3.26233075323189,51.2709787173281],[3.26263527147913,51.2713801936389],[3.26318146071906,51.2720295936182],[3.2634553363419,51.2723994935275],[3.26387483372983,51.2728611386423],[3.26498667289461,51.2741218634762],[3.26517515351057,51.2743542232742],[3.26548112654258,51.2747742458082],[3.2656719900105,51.2750622498242],[3.2663203480465,51.2760822455022],[3.26654447065414,51.2763705574121],[3.26711366310789,51.2770676621169],[3.26730922634662,51.2773139896127],[3.26740816509859,51.2774273141024],[3.26757606548435,51.2775934260445],[3.26767147535011,51.2776997646282],[3.26773641401449,51.277766420385],[3.26779499002104,51.2778677812358],[3.26796152484799,51.2780918203276],[3.26810230964377,51.2783109846482],[3.26832810971051,51.2786074199628],[3.26862657150391,51.2789566760241],[3.26874237571789,51.2791385255824],[3.26902437048823,51.2795594736799],[3.26913374562362,51.2797007048195],[3.26927243189256,51.2798526371773],[3.26941087304577,51.2800149963489],[3.269480019941,51.2801384716602],[3.26954050469004,51.2802375315838],[3.26960554768791,51.2803783508342],[3.2696561132308,51.2805062888289],[3.26971930963901,51.2806470908611],[3.26979603885454,51.2807625246361],[3.2698714676203,51.2808547701458],[3.26999185037356,51.2809995788984],[3.27009449815115,51.2811129352414],[3.2701440653583,51.2812049406957],[3.27019200395636,51.2812876605657],[3.27025495720616,51.281438889248],[3.27030147589511,51.2815818538444],[3.27035660345637,51.2817515507878],[3.27040769148064,51.2818574758765],[3.27045394771746,51.2819332271701],[3.27053100858093,51.2820347577689],[3.27074541220138,51.2822673477113],[3.27082630552906,51.2823631195843],[3.27088576765603,51.282427405014],[3.27104201359748,51.2826188971413],[3.27116875699479,51.2828077980811],[3.27162193540852,51.2834157337479],[3.27172073393982,51.2835360056663],[3.27180204065149,51.2836143985309],[3.27186023110148,51.283654336723],[3.27197164274324,51.283709832099],[3.27198954295642,51.2840483689484],[3.27261780591238,51.2848340593713],[3.27284396614458,51.2851177412029],[3.27303785499938,51.2853594071212],[3.27325146915058,51.2856267487714],[3.27331069361624,51.2857014598663],[3.26947825339915,51.2891412147653],[3.26507142245641,51.2931641688082],[3.26360966231093,51.2944808492888],[3.26212327360781,51.2958192990123],[3.26200322807461,51.2961264191208],[3.26092601418833,51.2968881151386],[3.26002898511676,51.297688569081],[3.25655103208617,51.3009087330749],[3.25349882891109,51.3036994110719],[3.25015333921334,51.3067549256548],[3.2476057897016,51.3090565654202],[3.24514026730049,51.311166567622],[3.24492693869535,51.3113487941918],[3.24342813042563,51.3126973214647],[3.24304443790033,51.3130424765381],[3.2415360502617,51.3144766400073],[3.24122535270763,51.314784242961],[3.24044615696666,51.315501077561],[3.23927130837709,51.3165953823389],[3.23777810758468,51.3179276685976],[3.23652576606209,51.3190096189672],[3.23581748510873,51.3196181735765],[3.23529423980725,51.3200697380374],[3.23525456731047,51.3201041226351],[3.2351826458368,51.3201718039736],[3.23388449515895,51.3213830737211],[3.23247253914456,51.3227079594307],[3.23093008815965,51.3241474556722],[3.22947761875285,51.3253826897573],[3.2285639684844,51.3262128751954],[3.22855357691846,51.3265615725213],[3.22855176056551,51.3266357179194],[3.22862168542054,51.327103384517],[3.22873744816656,51.3276630364123],[3.22888516062254,51.3282021368755],[3.22904287815936,51.3285594025624],[3.2293201788342,51.329018632121],[3.22975451284536,51.3296369651788],[3.23014563102167,51.3301320494165],[3.23058498059136,51.3306218011504],[3.2309891659728,51.3310370510036],[3.2309661529871,51.3310704351716],[3.23007611786321,51.3322172077824],[3.22979718191221,51.3325795484868],[3.22573221804906,51.3378152555655],[3.22522978129227,51.3384616522167],[3.22515334889196,51.3385605711823],[3.22747104921302,51.3388783872471],[3.2274448730904,51.3389650445342],[3.22727575020518,51.3395242707783],[3.22722971271969,51.3396663587077],[3.22745801707917,51.3397114309477],[3.2275997578448,51.3397406056767],[3.22786121456216,51.3397917900351],[3.22784451091577,51.3397939469382],[3.22783879153279,51.3398008446528],[3.22783660100735,51.3398147290424],[3.22776572712211,51.3400643455529],[3.2255081864251,51.3466326298399],[3.22544719411212,51.3468556876201],[3.22543956533575,51.3470155264824],[3.22545541633537,51.347198767334],[3.22554136625435,51.3473907952263],[3.22573455713698,51.3477368159994],[3.22670223267465,51.3493985622742],[3.22684847688458,51.3496977774715],[3.22692501807329,51.3499719871237],[3.22695223580988,51.3502955496693],[3.22691091570952,51.3506219288705],[3.22681375101539,51.3509616758955],[3.22668897552671,51.3512953630989],[3.22440461814136,51.3574206890789],[3.22420567688452,51.3578336136034],[3.22402560656818,51.3582316556712],[3.22382606612746,51.3585182666823],[3.22352155995463,51.3588583269616],[3.22321443276038,51.3591543275152],[3.22287610124873,51.3594395969223],[3.22254668051337,51.3596635361191],[3.22213324397056,51.3599167908612],[3.22125648794883,51.360344016675],[3.22059917624503,51.3605786846034],[3.21977030690474,51.3607896710772],[3.21933471767987,51.3608897427416],[3.21835908716027,51.361047152651],[3.19759416135762,51.3632960133711],[3.19529139914045,51.3632257542061],[3.19242751717216,51.3632391157376],[3.18985426067919,51.3632518193733],[3.18976525724935,51.3632578878444],[3.1874205015423,51.3632380451104],[3.18333864913803,51.3615078267032],[3.18291694497937,51.3612776493972],[3.18256415583542,51.3610307776258],[3.18020457702949,51.359494945795],[3.1716592230376,51.3538062728347],[3.17104674831482,51.3533713369903],[3.17061019847251,51.3530760713161],[3.17029176480587,51.3527935851549],[3.16978471610057,51.3522183341348],[3.16949980601742,51.3518562274549],[3.16929890126046,51.351465999433],[3.16915601383337,51.350907173248],[3.16913687596762,51.3502858642926],[3.16922279919264,51.3497525273829],[3.16947301721461,51.349019220501],[3.16994116774013,51.348086484596],[3.17527281863511,51.3396983931535],[3.17585917044731,51.3388375085579],[3.17637103152289,51.3381392631325],[3.18204559201075,51.3310834506336],[3.18095387026815,51.3305904576172],[3.18003049666395,51.3303146796724],[3.17935404162295,51.3302209861327],[3.17821655858082,51.3299279815646],[3.1774189023669,51.3296557626636],[3.17629235369172,51.3292979560047],[3.17539944489124,51.3289181550632],[3.17469067249223,51.3286433354267],[3.17375598217178,51.3283789817197],[3.17185785533873,51.327962365994],[3.16971955623492,51.3273926458596],[3.16742682651428,51.3267170290433],[3.16509920222562,51.3261059061679],[3.16387545330165,51.3257945035818],[3.16341344886429,51.3256368447034],[3.1624442915752,51.3253511911794],[3.1611874178658,51.3250347880807],[3.15937001110033,51.3245817093228],[3.15736601157256,51.3241220606594],[3.15627195449986,51.3238767968612],[3.15520485182358,51.3235912402159],[3.15476744892041,51.3234140989248]]]
            }
        }
    });
    map.addLayer({
        'id': 'route',
        'type': 'line',
        'source': 'Brugge',
        'layout': {
            'line-join': 'round'
        },
        'paint': {
            'line-color': 'red',
            'line-width': 2
        }
    });
};

var sendMarkers = function(geojson, map) {
  geojson.features.forEach(function(marker) {
    // create a DOM element for the marker
    var el = document.createElement('div');
    el.className = 'marker';
    el.style.backgroundImage = 'url(https://placekitten.com/g/' + marker.properties.iconSize.join('/') + '/)';
    el.style.width = marker.properties.iconSize[0] + 'px';
    el.style.height = marker.properties.iconSize[1] + 'px';

    el.addEventListener('click', function() {
        window.alert(marker.properties.message);
    });

    // add marker to map
    new mapboxgl.Marker(el, {offset: [-marker.properties.iconSize[0] / 2, -marker.properties.iconSize[1] / 2]})
        .setLngLat(marker.geometry.coordinates)
        .addTo(map);
  });
};



function setMarkers(map, coords) {
  var features = [];
  for (var i = 0; i < coords.length; i++) {
    var points = coords[i];
    var feature = {
        "type": "Feature",
        "properties": {
            "message": "A point",
            "iconSize": [60, 60]
        },
        "geometry": {
            "type": "A point",
            "coordinates": [points.long, points.lat]
        }
    };
    features.push(feature);
  }

  var geojson = {
    "type": "FeatureCollection",
    "features": features
  };

  sendMarkers(geojson, map);
}

var getCoordinatenGeneric = function getCoordinaten(url){
    var list = [];
    $.when($.getJSON(url).done(function (json) {
        for (var i = 0; i < json.length; i++) {
          var item = json[i];
          var geo = item.json_geometry;
          var coords = {
            lat: geo.coordinates[1],
            long: geo.coordinates[0]
          };
          list.push(coords);
        }
    }));
    return list;
};

function getCoordinatenMusea(){
    var list = [];
    $.when($.getJSON("data/musea.json").done(function (json) {
    for (var i = 0; i < json.length; i++) {
     var item = json[i];
     var address = item.Ligging.split(" ");
     $.getJSON("https://maps.googleapis.com/maps/api/geocode/json?address="+address[0]+"+"+address[1]+"&key=AIzaSyAM6FLYxpA8usOS4sBeYwo3wwzifUMPEfE").done(function(json){
         var geo = json.results[0].geometry.location;
         var object;
         object = {
                    lat:geo.lat,
                   long:geo.lng

         };
        list.push(object);
     });

     }
 }));
     return list;
}

function getCoordinatenZitBanken(){
    var list = [];
    $.when($.getJSON("data/zitbanken.json").done(function (json) {
    for (var i = 0; i < json.length; i++) {
     var item = json[i];
     var geo = item.json_geometry;
     if(!Array.isArray(geo.coordinates[0])){
         var object;
         object = {
                    lat:geo.coordinates[1],
                   long:geo.coordinates[0]

         };
        list.push(object);
     }
     else{
         for(var j = 0; j<geo.coordinates.length;j++){
             var object;
             object = {
                 lat:geo.coordinates[j][1],
                 long:geo.coordinates[j][0]

             };
             list.push(object);
}}}
 }));
     return list;
}

var getCoordinatenParken = function getCoordinatenParken(){
    var list = [];
    $.when($.getJSON("data/groen.json").done(function (json) {
    for (var i = 0; i < json.length; i++) {
     var item = json[i];
     //console.log(item.BEHEERSOBJECT);
     if(item.BEHEERSOBJECT == "parken"){
         if(item.PUBLIEK_TOEGANKELIJK == "J"){
             console.log(item);
                var geo = item.json_geometry;
                var glat = 0;
                var glong = 0;
             for(var j=0; j<geo.coordinates.length; j++){
                 glat += geo.coordinates[0][j][1];
                 glong += geo.coordinates[0][j][0];
             }
             glat = glat/geo.coordinates.length;
             glong = glong/geo.coordinates.length;
             var object = {
                        lat:glat,
                       long:glong
             };
             list.push(object);
         }
    }
     }
 }));
    return list;
};

function getCoordinatenBib(){
    return getCoordinatenGeneric("/data/bibliotheken.json");
}

function getCoordinatenLokalen(){
    return getCoordinatenGeneric("/data/jeugdlokalen.json");
 }

 function getCoordinatenSport(){
     return getCoordinatenGeneric("/data/sport.json");
 }
 function getCoordinatenZwembaden(){
     return getCoordinatenGeneric("/data/zwembaden.json");
 }

var data = {
  libPoints: getCoordinatenBib,
  museumPoints: getCoordinatenMusea,
  sportPoints: getCoordinatenSport,
  swimmingPoints: getCoordinatenZwembaden,
  youthPoints: getCoordinatenLokalen,
  museaPoints: getCoordinatenMusea,
  benchPoints: getCoordinatenZitBanken,
  parkPoints: getCoordinatenParken
};

(function() {
    var map;
    var list = [];

    $(window).on('load', function(e){
        if (window.location.hash == '#_=_') {
            window.location.hash = ''; // for older browsers, leaves a # behind
            history.pushState('', document.title, window.location.pathname); // nice and clean
            e.preventDefault(); // no page reload
        }
    });

    $(function () {
        makeMap();
        map.on('load', function () {
            drawBruges(map);
        });
        addEventListeners();
        $("#route").on('click', openRoute);
        setInterval(determinePosition, 5000);
        var points = data.benchPoints();
        setMarkers(map, points);
    });

    var makeMap = function makeMap() {
        mapboxgl.accessToken = 'pk.eyJ1Ijoicm9vdHNhbSIsImEiOiJjaXU5a2V4aGcwMDFlMnRtazRibjZiZGN3In0.Q1K1wv1ugX49a4e1pCLMZw';
        map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/light-v9',
            center: [3.227180, 51.210358],
            zoom: 13.7
        });
    };
})();
